<?php
/**
 * FIXME: Edit Title Content
 *
 * FIXME: Edit Description Content
 *
 * Please do not edit this file. This file is part of the Response core framework and all modifications
 * should be made in a child theme.
 * FIXME: POINT USERS TO DOWNLOAD OUR STARTER CHILD THEME AND DOCUMENTATION
 *
 * @category Response
 * @package  Framework
 * @since    1.0
 * @author   CyberChimps
 * @license  http://www.opensource.org/licenses/gpl-license.php GPL v2.0 (or later)
 * @link     http://www.cyberchimps.com/
 */

// FIXME: Fix documentation
function response_load_breadcrumbs() {
	// TODO: Only check once maybe on plugin activation and maybe throw alerts that there is a plugin conflict or maybe allow a dropdown when breadcrumb is assigned that allows you to choose which plugin to use. Plugin options would be added as they become available
	if (response_yoast_breadcrumbs()) {
		// load yoast breadcrumbs
		add_action('response_before_content', 'yoast_breadcrumb');
	} else if (response_navxt_breadcrumbs()) {
		// load navxt breadcrumbs
		add_action('response_before_content', 'bcn_display');
	} else {
		// load default breadcrumbs
		add_action('response_before_content', 'response_default_breadcrumbs');
	}
}
//add_action('init', 'response_load_breadcrumbs');

// FIXME: Fix documentation
function response_default_breadcrumbs() {
	// TODO: Work on code to add more features and clean up markup
	if (is_home()) {
		echo 'Home';
	} else {
		echo '<a href="' . get_site_url() . '">Home</a> &raquo; ';
		if (is_category() || is_single()) {
			the_category('title_li=');
			if (is_single()) {
				echo " &raquo; ";
				the_title();
			}
		} elseif (is_page()) {
			echo the_title();
		}
	}
}

// FIXME: Fix documentation
function response_yoast_breadcrumbs() {
	// check if yoast plugin is installed and activated
	if ( response_detect_plugin( array('constants' => array( 'WPSEO_VERSION' ) ) ) ) {
		$options = get_wpseo_options(); // get yoast options
		
		// check if breadcrumbs are enabled and yoast_breadcrumb function exists
		if ( ( isset($options['breadcrumbs-enable']) && $options['breadcrumbs-enable'] ) && ( function_exists( 'yoast_breadcrumb' ) ) ) {
			return true;
		}
	}

	return false;
}

// FIXME: Fix documentation
function response_navxt_breadcrumbs() {
	// check if navxt breadcrumbs plugin is installed and activated
	if ( response_detect_plugin( array('classes' => array( 'bcn_breadcrumb' ) ) ) ) {
		
		// check if bcn_display function exists
		if ( function_exists( 'bcn_display' ) ) {
			return true;
		}
	}

	return false;
}