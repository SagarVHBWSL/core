<?php
/**
 * FIXME: Edit Title Content
 *
 * FIXME: Edit Description Content
 *
 * Please do not edit this file. This file is part of the Response core framework and all modifications
 * should be made in a child theme.
 * FIXME: POINT USERS TO DOWNLOAD OUR STARTER CHILD THEME AND DOCUMENTATION
 *
 * @category Response
 * @package  Framework
 * @since    1.0
 * @author   CyberChimps
 * @license  http://www.opensource.org/licenses/gpl-license.php GPL v2.0 (or later)
 * @link     http://www.cyberchimps.com/
 */

function response_header_section_order() {
	foreach(response_get_option('header_section_order') as $func) {
		do_action($func);
	}
}
add_action('response_header', 'response_header_section_order');

// Logo/Icons header element.
function response_logo_icons() { ?>
	<header class="row-fluid">
		<div class="span7">
			<?php if (function_exists('response_header_logo') ) {
				response_header_logo();
			} ?>
		</div>	
	
		<div id ="register" class="span5">
			<?php if (function_exists('response_header_social_icons') ) {
				response_header_social_icons();
			} ?>
		</div>
	</header>
<?php }
add_action('response_header_content', 'response_logo_icons');

// Description/Icons header element.
function response_description_icons() { ?>
	<header class="row-fluid">
		<div class="span7">
			<?php if (function_exists('response_header_site_title') ) {
				response_header_site_title();
			} ?>
		</div>	
	
		<div id ="register" class="span5">
			<?php if (function_exists('response_header_social_icons') ) {
				response_header_social_icons();
			} ?>
		</div>
	</header>
<?php }
add_action('response_description_icons', 'response_description_icons');

// Header left content (sitename or logo)
function response_header_logo() {
	
	$logo = response_get_option('custom_logo');
	var_dump($logo);
	
	if ( response_get_option('custom_logo_display') == '1') {
		
	?>
		<div id="logo">
			<a href="<?php echo home_url(); ?>/"><img src="<?php echo stripslashes($logo['url']); ?>" alt="logo"></a>
		</div>
	<?php } else {
		if ( function_exists('response_header_site_title') ) {
			response_header_site_title();
		}
	}					 
}

function response_header_site_title() { ?>	
	<hgroup>
		<h1 class="site-title"><a href="<?php echo home_url( '/' ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home"><?php bloginfo( 'name' ); ?></a></h1>
		<h2 class="site-description"><?php bloginfo( 'description' ); ?></h2>
	</hgroup>
<?php }


// Social icons
function response_header_social_icons() {
	
	$folder = ( response_get_option('theme_backgrounds') ) ? response_get_option('theme_backgrounds') : 'default';
	
	$twitter_display = response_get_option('social_twitter');
	$facebook_display = response_get_option('social_facebook');
	$google_display = response_get_option('social_google');
	$flickr_display = response_get_option('social_flickr');
	$pinterest_display = response_get_option('social_pinterest');
	$linkedin_display = response_get_option('social_linkedin');
	$youtube_display = response_get_option('social_youtube');
	$googlemaps_display = response_get_option('social_googlemaps');
	$email_display = response_get_option('social_email');
	$rss_display = response_get_option('social_rss');
	
	$output = '';
	
	if ( !empty($twitter_display) ) {
		$twitter_url = response_get_option('twitter_url');
		$output .= '<a href="'.esc_attr($twitter_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/twitter.png" alt="Twitter" /></a>';
	}
	
	if ( !empty($facebook_display) ) {
		$facebook_url = response_get_option('facebook_url');
		$output .= '<a href="'.esc_attr($facebook_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/facebook.png" alt="Facebook" /></a>';
	}
	
	if ( !empty($google_display) ) {
		$google_url = response_get_option('google_url');
		$output .= '<a href="'.esc_attr($google_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/gplus.png" alt="Google" /></a>';
	}
	
	if ( !empty($flickr_display) ) {
		$flickr_url = response_get_option('flickr_url');
		$output .= '<a href="'.esc_attr($flickr_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/flickr.png" alt="Flickr" /></a>';
	}
	
	if ( !empty($pinterest_display) ) {
		$pinterest_url = response_get_option('pinterest_url');
		$output .= '<a href="'.esc_attr($pinterest_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/pinterest.png" alt="Pinterest" /></a>';
	}
	
	if ( !empty($linkedin_display) ) {
		$linkedin_url = response_get_option('linkedin_url');
		$output .= '<a href="'.esc_attr($linkedin_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/linkedin.png" alt="LinkedIn" /></a>';
	}
	
	if ( !empty($youtube_display) ) {
		$youtube_url = response_get_option('youtube_url');
		$output .= '<a href="'.esc_attr($youtube_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/youtube.png" alt="YouTube" /></a>';
	}
	
	if ( !empty($googlemaps_display) ) {
		$googlemaps_url = response_get_option('googlemaps_url');
		$output .= '<a href="'.esc_attr($googlemaps_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/googlemaps.png" alt="Google Maps" /></a>';
	}
	
	if ( !empty($email_display) ) {
		$email_url = response_get_option('email_url');
		$output .= '<a href="'.esc_attr($email_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/email.png" alt="Email" /></a>';
	}
	
	if ( !empty($rss_display) ) {
		//bloginfo('rss2_url')
		$rss_url = response_get_option('rss_url');
		$output .= '<a href="'.esc_attr($rss_url).'" target="_blank"><img src="'. get_template_directory_uri() .'/core/lib/images/social/'.$folder.'/rss.png" alt="RSS" /></a>';
	}
	?>
	
	<div id="social">
		<div class="icons">
			<?php echo $output; ?>
		</div>
	</div>
	
<?php }

// Navigation
function response_navigation() { ?>
	<div class="container">
		<div class="row">
			<div class="twelve columns" id="menu">
				<div id="nav" class="twelve columns">
					<?php wp_nav_menu( array( 
						'theme_location' => 'header-menu', // Setting up the location for the main-menu, Main Navigation.
						'fallback_cb' => 'response_menu_fallback', //if wp_nav_menu is unavailable, WordPress displays wp_page_menu function, which displays the pages of your blog.
						'items_wrap' => '<ul id="nav_menu">%3$s</ul>',
					)); ?>
				</div>
			</div>
		</div>
	</div>
 <?php
}

// Custom HTML header element.
function response_custom_header_element_content() { ?>
	<header class="row-fluid">
		<div class="span7">
			<?php echo stripslashes ($options->get($themeslug.'_custom_header_element')); ?>
		</div>
	</header>
<?php }

// Sitename/Register
function response_logo_register_content() {
global $current_user; ?>
	<header class="row-fluid">
		<div class="span7">
			<?php if (function_exists('response_header_sitename') ) {
				response_header_sitename();
			} ?>
		</div>	

		<div id ="register" class="span5">
			<?php if(!is_user_logged_in()) :?>
				<li><?php wp_loginout(); ?></li> <?php wp_meta(); ?><li> |<?php wp_register(); ?>  </li>
			<?php else :?>
				Welcome back <strong><?php global $current_user; get_currentuserinfo(); echo ($current_user->user_login); ?></strong> | <?php wp_loginout(); ?>
			<?php endif;?>
		</div>
	</header>
<?php }

// Full-Width Logo
function response_banner_content() {
global $themeslug, $options; //Call global variables

$banner = $options->get($themeslug.'_banner'); //Calls the logo URL from the theme options
$url = $options->get($themeslug.'_banner_url');
$default = "$root/images/pro/banner.jpg";

?>
	<div class="container">
		<div class="row">
			<div class="twelve columns">
				<div id="banner">
					<?php if ($banner != ""):?>
						<a href="<?php echo $url; ?>/"><img src="<?php echo stripslashes($banner['url']); ?>" alt="logo"></a>
					<?php endif; ?>
					
					<?php if ($banner == ""):?>
						<a href="<?php echo $url; ?>/"><img src="<?php echo $default; ?>" alt="logo"></a>
					<?php endif; ?>
				</div>		
			</div>	
		</div>
	</div>
<?php
}